server {
  listen 80;
  server_name _;

  # Serve images from /usr/share/nginx/html/images (mounted from host)
  root /usr/share/nginx/html;

  # Serve custom gallery page at /images.html
  location = /images.html {
    try_files /images.html =404;
  }

  # Internal: expose raw listing of images dir for the gallery JS to parse
  location /_list/images/ {
    alias /usr/share/nginx/html/images/;
    autoindex on;
    autoindex_exact_size off;
    autoindex_localtime on;
  }

  # Images path: serve files directly; otherwise fall back to gallery index page outside the bind mount
  location /images/ {
    try_files $uri $uri/ /_images_index.html;
  }

  # Videos path: show directory listing (folders contain videos)
  location /videos/ {
    alias /usr/share/nginx/html/videos/;
    autoindex on;
    autoindex_exact_size off;
    autoindex_localtime on;
  }

  # Default location
  location / {
    try_files $uri $uri/ =404;
  }
}
